# IV Estimates: Mortgage Rate Gap and Lock-in Proxies

This folder contains instrumental-variables (2SLS) estimation results linking local
mortgage rate gaps to housing-market lock-in proxies constructed from Zillow data.

The analysis estimates the causal effect of the mortgage rate gap on seller behavior
and market activity, using a Bartik-style instrument that combines national mortgage
rate shocks with predetermined local exposure.

## Script

Generated by:
- `code/ch02/06_housing_quant/02_iv_lockin_proxies.R`

**Inputs**

### Stage-1 panel (rate gap, IV, controls)
- `data/transformed/ch02/rate_gap/Panel_rategap_hat.csv`

Required variables:
- `cbsa_code`, `ym`
- `rate_gap` (endogenous regressor)
- `Z_bartik` (instrument)
- Controls: `unemployment_rate`, `mig_rate_month`, `bps_total`

### Zillow lock-in proxy outcomes
- `data/transformed/ch02/zillow/zillow_invt.csv`
- `data/transformed/ch02/zillow/zillow_newlisting.csv`
- `data/transformed/ch02/zillow/zillow_newlypending.csv`
- `data/transformed/ch02/zillow/zillow_daytopending.csv`
- `data/transformed/ch02/zillow/zillow_sharepricecut.csv`

Each file contains:
- `cbsa_code`, `yearmon`, `proxy_value`

**Outputs**

- `iv_lockin_proxies_2sls_results.csv`

This file reports IV estimates for each lock-in proxy under two specifications:
- **Raw (1pp)**: coefficients in original units (1 percentage point change in rate gap)
- **Z-score (partialled)**: standardized coefficients computed using residual variation
  after partialling out controls and fixed effects.

Reported statistics include:
- coefficient estimates and clustered standard errors (CBSA level)
- weak-instrument diagnostics (Kleibergen–Paap F-statistic)
- endogeneity tests (Wu–Hausman) where available

## Notes

- All regressions include CBSA and month fixed effects.
- Standard errors are clustered at the CBSA level.
- The script preserves the original Zillow proxy file names and does not merge outcomes
  into a single panel, to facilitate downstream extensions.

---

# DID: High- vs Low-Lock-in CBSAs (Post-2022)

**Purpose**  
Estimate a difference-in-differences specification that compares housing-market outcomes
between high-lock-in and low-lock-in CBSAs after the 2022 rate shock (Post ≥ 2022-03).

High-lock-in areas are defined using each CBSA’s baseline exposure, measured as the
outstanding-balance-weighted mortgage rate in 2021. The bottom third of the 2021
distribution is classified as **HighLockedIn**.

**Script**  
- `code/ch02/06_housing_quant/03_did_lockin_exposure.R`

**Inputs**  
- Baseline exposure (for HighLockedIn definition):  
  `data/transformed/ch02/rate_gap/MSA_outstanding_weighted_rate_monthly.csv`
- Zillow CBSA-by-month proxies (constructed earlier):  
  `data/transformed/ch02/zillow/zillow_newlisting.csv`  
  `data/transformed/ch02/zillow/zillow_invt.csv`  
  `data/transformed/ch02/zillow/zillow_newlypending.csv`  
  `data/transformed/ch02/zillow/zillow_daytopending.csv`  
  `data/transformed/ch02/zillow/zillow_sharepricecut.csv`

**Output**  
- `did_lockin_exposure_results.csv`  
  Stored in: `data/output/ch02/housing_quant/`

This file reports the coefficient on `HighLockedIn × Post` under **two specifications**:
- `spec = log`: log outcome (drops non-positive values)
- `spec = level`: level outcome (no log transform)

All regressions include CBSA and month fixed effects with CBSA-clustered standard errors.
