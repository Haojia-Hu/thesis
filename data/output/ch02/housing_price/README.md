# Chapter 2 - Housing Price

This folder contains regression outputs for the Chapter 2 house price analysis using 2SLS.

## The module purpose
We estimate 2SLS models of CBSA-level monthly house price growth on the local mortgage rate gap.
The endogenous regressor is `rate_gap`, instrumented by `Z_bartik`. All specifications include
CBSA fixed effects and month fixed effects, with standard errors clustered at the CBSA level.

In addition to the baseline 2SLS model, we run a set of robustness checks that vary the sample
and specification following the analysis script.

## Inputs (from data/transformed/ch02)
1. Zillow house prices (ZHVI)
- data/transformed/ch02/zillow/zillow_zhvi.csv
Used to construct monthly house price growth:
`price_chg = 100 * (log(ZHVI_t) - log(ZHVI_{t-1}))`.

2. Core CBSA-month panel (RateGap, IV, and controls)
- data/transformed/ch02/housing_quant/panel_rategap_hat.csv
Contains `rate_gap`, `Z_bartik`, and time-varying controls such as unemployment rate,
migration rate, and building permits.

3. Zillow housing quantity proxy (new listings)
- data/transformed/ch02/zillow/zillow_newlisting.csv
Used to construct a logged lock-in proxy (`proxy_newlist`), primarily for consistency
with the broader Chapter 2 data pipeline.

## Outputs
1. housing_price_2sls_baseline_and_robustness.csv
A tidy table that records the estimated 2SLS coefficient on `rate_gap` and key statistics
for:
- Baseline 2SLS
- Baseline + lagged dependent variable
- Trimmed sample (5–95 percentiles of rate gap) [as implemented in code]
- High-gap vs low-gap subsamples (split at the sample median) [as implemented in code]
- COVID vs hiking-period subsamples [as implemented in code]

2. housing_price_2sls_models.rds (optional)
Serialized `fixest` model objects for reproducibility and for producing LaTeX tables
without rerunning regressions.

## Reproducibility
These outputs are generated by:
- code/ch02/07_housing_price/01_price_2sls_robustness.R

---

# Local Projection IV (Dynamic Effects)

In addition to the static 2SLS specifications, we estimate dynamic responses of house price growth to RateGap shocks using Local Projection IV (LP-IV).

## The LP specification estimates, for horizons h = 0 to 12 months:

    price_chg_{t+h} = β_h * RateGap_t  (IV: Z_bartik)
                      + controls
                      + CBSA FE
                      + Month FE
                      + ε_{t+h}

where:
- price_chg = 100 * Δlog(ZHVI)
- rate_gap is instrumented by Z_bartik
- Standard errors are clustered at the CBSA level
- Month FE uses ym (YYYY-MM)

The LP estimates correspond to non-cumulative impulse responses (month-by-month price growth response).

## Outputs (LP-IV)

lp_price_irf_non_cum.csv  
A tidy table containing, for each horizon h = 0–12:
- Estimated coefficient on rate_gap
- Clustered standard error
- 95% confidence interval
- Number of observations used

lp_price_irf_non_cum.png  
Impulse response figure showing:
- Point estimates across horizons
- 95% confidence bands
- Zero line for reference

## Reproducibility (LP-IV)

These dynamic outputs are generated by:

code/ch02/07_housing_price/02_price_lpiv_irf.R
