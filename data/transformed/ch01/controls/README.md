# Transformed Controls — Chapter 1

This folder contains **analysis-ready control variables** used in Chapter 1 regressions
(including Local Projections). These datasets are produced **before** constructing the final
regression panels.

All files here are generated by scripts under:

- `code/ch01/03_expectation_formation/`

This folder is organized into two components:

- `macro/` : macroeconomic controls (FRED)
- `news/`  : news volume controls (Factiva)

---

## 1. Macroeconomic Controls (`macro/`)

### Source
Macroeconomic series are downloaded from the **FRED database**:
https://fred.stlouisfed.org/

Raw files are exported from FRED as CSV and identified by **FRED series IDs**.

### Construction script
Generated by:
- `code/ch01/03_expectation_formation/01_ingest_macro_raw.R`

### Output files
Each file contains:
- `Date` (monthly date, YYYY-MM-01)
- one macro variable column

Files (variable names used in regressions):
- `RDI.csv`           (`RDI`)
- `ConsumerSent.csv`  (`ConsumerSent`)
- `Unemployment.csv`  (`Unemployment`)
- `EPU.csv`           (`EPU`)
- `CpiAgg.csv`        (`CpiAgg`)
- `InflationExp.csv`  (`InflationExp`)
- `Mortgage.csv`      (`MortgageRate`)

### Notes on frequency and processing
- Sample is restricted to **2000-01-01 through 2024-12-01**.
- Most series are monthly in raw form.
- Mortgage rate (`MortgageRate`) is aggregated from weekly `MORTGAGE30US` to a **monthly average**.

Downstream transformations (e.g., differencing, lagging) are applied later when building
the regression panel.

---

## 2. News Volume Controls (`news/`)

### Source
News counts are extracted from **Factiva (Dow Jones)**:
https://www.dowjones.com/business-intelligence/factiva/products/factiva/

Factiva queries are constructed using the **same keyword-category mapping** as the
Google Trends attention index (category-level keyword lists).

### Construction script
Generated by:
- `code/ch01/03_expectation_formation/02_ingest_factiva_raw.R`

### Output files
Naming convention:
- `*_factiva_monthly.csv`

Each file contains:
- `Date` (monthly date, YYYY-MM-01)
- `Year`
- `Month`
- `NewsCount_Monthly` (monthly news count proxy)

### Notes on annual → monthly conversion
Raw Factiva exports provide annual document counts. These are converted to monthly frequency by:
1. computing `NewsCount_Monthly = DocumentCount / 12`
2. expanding each year into 12 months with equal allocation

---

## How these controls are used

Data in `controls/` are merged with category-level attention indices and price variables to form
the final regression panel used in:
- Local Projection regressions (baseline and robustness checks)
- Fixed-effects regressions in Chapter 1
